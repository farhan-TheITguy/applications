name: Upload and Notify

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: Linux
    steps:
      - name: Get current date
        id: timestamp
        run: echo "timestamp=$(date +'%Y-%m-%dT%H-%M-%S')" >> $GITHUB_OUTPUT
      - name: Test with environment variables
        run: echo $FILE_NAME
        env:
          FILE_NAME: GitHubContext-${{ steps.timestamp.outputs.timestamp }}.json
      - name: Configure the CLI
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: |
          pwd
          ls -lrt
          whoami
          echo "$GITHUB_CONTEXT" > githubcontext
      - name: Test the CLI
        run: |
          aws sts get-caller-identity
          aws s3 ls
